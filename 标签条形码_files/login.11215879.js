(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0290":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-wrap",style:"background-image: url("+t.bgImg+");"},[t._m(0),s("div",{staticClass:"ms-login"},[t._m(1),s("div",{staticClass:"login_right"},[s("div",{staticClass:"ms-title"},[t._v("\n                天宝软件ERP管理系统\n            ")]),s("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.isQR,expression:"!isQR"}],ref:"login",staticClass:"ms-content loginin",attrs:{model:t.param}},[s("el-form-item",{staticClass:"item",attrs:{prop:"username"}},[s("el-input",{staticClass:"input",attrs:{placeholder:"用户名"},model:{value:t.param.username,callback:function(e){t.$set(t.param,"username",e)},expression:"param.username"}})],1),s("el-form-item",{staticClass:"item",attrs:{prop:"password"}},[s("el-input",{staticClass:"input",attrs:{type:"password",size:"80px",placeholder:"密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm()}},model:{value:t.param.password,callback:function(e){t.$set(t.param,"password",e)},expression:"param.password"}})],1),s("el-form-item",[s("JcRange",{key:t.tempNum,attrs:{successFun:t.successIt,errorFun:t.failIt}})],1),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("登录")])],1),s("div",{staticClass:"footer"},[s("p",{staticClass:"login-tips"},[s("i"),t._v("\n                        其他登录方式\n                        "),s("i")]),s("span",{staticClass:"iconfont icon-yooxi icons",on:{click:t.QRcode}})])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isQR,expression:"isQR"}],staticClass:"img_wrap"},[s("img",{attrs:{src:t.QR,alt:""}}),s("span",{staticClass:"iconfont icon-qiehuan icons",on:{click:t.closeIsQR}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mask"},[s("i",{staticClass:"el-icon-loading icons"})])],1)]),s("div",{staticClass:"footers"},[s("div",[s("p",[t._v("\n                合作热线：0755-88830881 丨 官方网站: "),s("el-link",{staticStyle:{color:"#fff"},attrs:{href:"http://www.whtbrj.com"}},[t._v("www.whtbrj.com")])],1)]),t._m(2)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:s("8f1f"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login_left"},[a("img",{staticClass:"img1",attrs:{src:s("128d"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",[t._v("版权所有: 深圳市物华天宝软件有限公司 © 2002~2022 All Rights Reserved")])])}],i=s("fd03"),o=(s("4360"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"jc-component__range"},[s("div",{staticClass:"jc-range",class:t.rangeStatus?"success":""},[s("i",{class:t.rangeStatus?t.successIcon:t.startIcon,on:{mousedown:t.rangeMove}}),t._v("\n        "+t._s(t.rangeStatus?t.successText:t.startText)+"\n    ")])])}),r=[],c={props:{successFun:{type:Function},successIcon:{type:String,default:"el-icon-success"},successText:{type:String,default:"验证成功"},startIcon:{type:String,default:"el-icon-d-arrow-right"},startText:{type:String,default:"拖动滑块到最右边"},errorFun:{type:Function},status:{type:String}},data:function(){return{disX:0,rangeStatus:!1}},methods:{rangeMove:function(t){var e=this,s=t.target,a=t.clientX,n=s.offsetWidth,i=s.parentElement.offsetWidth,o=i-n;if(this.rangeStatus)return!1;document.onmousemove=function(t){var i=t.clientX;e.disX=i-a,e.disX<=0&&(e.disX=0),e.disX>=o-n&&(e.disX=o),s.style.transition=".1s all",s.style.transform="translateX("+e.disX+"px)",t.preventDefault()},document.onmouseup=function(){e.disX!==o?(s.style.transition=".5s all",s.style.transform="translateX(0)",e.errorFun&&e.errorFun()):(e.rangeStatus=!0,e.status&&(e.$parent[e.status]=!0),e.$emit("statusGoF",e.rangeStatus),e.successFun&&e.successFun()),document.onmousemove=null,document.onmouseup=null}}}},l=c,u=(s("f814"),s("2877")),m=Object(u["a"])(l,o,r,!1,null,"73fa83b5",null),d=m.exports,g={data:function(){return{param:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},status:!1,tempNum:"1",isQR:!1,QR:"",timeObj:{},ticket:"",loading:!1,timeID:"",bgImg:"",dialogFormVisible:!1,formLabelWidth:"120px",form:{lv_login_staff:null,lv_password:null,login_staff:null}}},components:{JcRange:d},created:function(){this.getBgImg(),sessionStorage.removeItem("userToken"),localStorage.removeItem("local_token")},mounted:function(){},methods:{getBgImg:function(){var t=this;Object(i["zj"])({type:this.$bus.data.type,name:"登录背景"}).then((function(e){console.log("res",e),t.bgImg=e.data}))},successIt:function(){this.status=!0},failIt:function(){this.status=!1},submitForm:function(){var t=this;this.$refs.login.validate((function(e){if(!e)return t.$message.error("请输入账号和密码"),!1;1==t.status?Object(i["qd"])({login_staff:t.param.username,password:t.param.password}).then((function(e){2e3==e.code?(localStorage.setItem("ms_username",t.param.username),sessionStorage.setItem("userToken",e.data.token),localStorage.getItem("local_token")||localStorage.setItem("local_token",e.data.local_token),t.$message.success(e.msg),/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(navigator.userAgent)?t.$message.error("移动端系统正在维护中…"):(localStorage.setItem("type","首页"),t.$router.push("/indexpage"))):(t.tempNum=Math.random(),t.$message.error(e.msg),t.status=!1)})):t.$message.error("请验证")}))},closeIsQR:function(){this.isQR=!1,this.timeID&&clearTimeout(this.timeID)},QRcode:function(){var t=this;this.loading=!0,Object(i["rd"])({type:this.$bus.data.type}).then((function(e){t.QR=e.img,t.isQR=!0,t.loading=!1,sessionStorage.setItem("ticket",e.ticket),t.ticket=e.ticket,t.timer()}))},timer:function(){var t=this;this.timeID&&clearTimeout(this.timeID),this.timeID=setTimeout((function(){Object(i["ud"])({ticket:t.ticket,type:t.$bus.data.type}).then((function(e){var s=e.data,a=s.type,n=s.token,i=s.content;2e3==e.code&&(1==a?(localStorage.getItem("local_token")||localStorage.setItem("local_token",e.data.local_token),sessionStorage.setItem("userToken",n),t.$router.push("/"),t.$message.success("登录成功")):3==a||4==a?t.$message.error(i):2==a?t.QRcode():0==a&&t.timer())}))}),2600)}}},p=g,f=(s("48fb"),Object(u["a"])(p,a,n,!1,null,"20ac7a1d",null));e["default"]=f.exports},"0a92":function(t,e,s){},"128d":function(t,e,s){t.exports=s.p+"img/login_logo.507306bb.png"},"48fb":function(t,e,s){"use strict";var a=s("0a92"),n=s.n(a);n.a},"4d18":function(t,e,s){},"8f1f":function(t,e,s){t.exports=s.p+"img/logo1.68addf53.png"},f814:function(t,e,s){"use strict";var a=s("4d18"),n=s.n(a);n.a}}]);
//# sourceMappingURL=login.11215879.js.map
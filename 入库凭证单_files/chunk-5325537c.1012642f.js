(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5325537c"],{1388:function(t,e,a){"use strict";var s=a("58a9"),n=a.n(s);n.a},3835:function(t,e,a){"use strict";function s(t){if(Array.isArray(t))return t}function n(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],s=!0,n=!1,l=void 0;try{for(var i,r=t[Symbol.iterator]();!(s=(i=r.next()).done);s=!0)if(a.push(i.value),e&&a.length===e)break}catch(o){n=!0,l=o}finally{try{s||null==r["return"]||r["return"]()}finally{if(n)throw l}}return a}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function i(t,e){if(t){if("string"===typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return s(t)||n(t,e)||i(t,e)||r()}a.d(e,"a",(function(){return o}))},"58a9":function(t,e,a){},"6c15":function(t,e,a){"use strict";var s=a("d625"),n=a.n(s);n.a},b887:function(t,e,a){t.exports=a.p+"img/last1.b6402fd3.png"},c3f01:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("img",{class:null==t.prev?"gray":"",staticStyle:{width:"30px",transform:"rotate(180deg)"},attrs:{src:a("b887"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.firstPage()}}}),s("img",{class:null==t.prev?"gray":"",staticStyle:{width:"30px",transform:"rotate(180deg)",margin:"0 15px"},attrs:{src:a("e484"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.prevPage()}}}),s("img",{class:null==t.next?"gray":"",staticStyle:{width:"30px","margin-right":"15px"},attrs:{src:a("e484"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.nextPage()}}}),s("img",{class:null==t.next?"gray":"",staticStyle:{width:"30px"},attrs:{src:a("b887"),alt:""},on:{click:function(e){1!=t.isAdd&&1!=!t.isedit&&t.lastPage()}}}),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",icon:"el-icon-refresh",size:"mini"},on:{click:function(e){t.outData.isshow=!0}}},[t._v("筛选")]),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-download",size:"mini"},on:{click:t.showOut}},[t._v("导出\n                ")])],1),s("div",{staticStyle:{float:"right"}},[1==t.perData.allow_add?s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",disabled:t.isAdd||!t.isedit},on:{click:t.add}},[t._v("新建")]):t._e(),1==t.perData.allow_edit?s("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit",disabled:t.isAdd||!t.isedit||t.isCheck||t.nullBtn},on:{click:t.handelEdit}},[t._v("修改")]):t._e(),1==t.perData.allow_dele?s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:t.isAdd||!t.isedit||t.isCheck||t.nullBtn},on:{click:t.delIt}},[t._v("删除")]):t._e(),1==t.perData.allow_edit||1==t.perData.allow_add?s("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-document-checked",disabled:t.nullBtn||t.isedit},on:{click:t.saveIt}},[t._v("保存")]):t._e(),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-refresh-left",disabled:t.isCheck||t.nullBtn||t.isedit},on:{click:function(e){return t.refreshData(t.form.salesj_no)}}},[t._v("撤回")]),1==t.perData.allow_print?s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-printer",disabled:t.isAdd||!t.isedit||t.nullBtn},on:{click:t.printOut}},[t._v("打印")]):t._e(),1==t.perData.allow_check?s("div",{staticClass:"checkboxPro1",staticStyle:{float:"right","margin-top":"5px","margin-left":"20px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.check,expression:"form.check"}],attrs:{type:"checkbox",disabled:t.isAdd||!t.isedit,name:""},domProps:{checked:1==t.form.check,checked:Array.isArray(t.form.check)?t._i(t.form.check,null)>-1:t.form.check},on:{change:[function(e){var a=t.form.check,s=e.target,n=!!s.checked;if(Array.isArray(a)){var l=null,i=t._i(a,l);s.checked?i<0&&t.$set(t.form,"check",a.concat([l])):i>-1&&t.$set(t.form,"check",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.form,"check",n)},function(e){return t.isEdit(t.form.check)}]}}),s("span",{staticStyle:{"margin-left":"10px","margin-top":"10px","font-weight":"bold",color:"red"}},[t._v("审核")])]):t._e()],1)]),s("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[s("el-button",{attrs:{type:"warning",disabled:t.isAdd||!t.isedit,size:"mini"},on:{click:function(e){t.checkData.isshow=!0}}},[t._v("批量审核 ")])],1),s("el-form",{ref:"form",staticClass:"topForm",attrs:{model:t.form,rules:t.rules,size:"mini","label-width":"90px"}},[s("el-row",{staticClass:"modify",attrs:{gutter:5}},[s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"创建人："}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.build_name,callback:function(e){t.$set(t.form,"build_name",e)},expression:"form.build_name"}})],1)],1),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"修改人："}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.modify_name,callback:function(e){t.$set(t.form,"modify_name",e)},expression:"form.modify_name"}})],1)],1),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"创建时间："}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.build_date,callback:function(e){t.$set(t.form,"build_date",e)},expression:"form.build_date"}})],1)],1),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"修改时间："}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.modify_date,callback:function(e){t.$set(t.form,"modify_date",e)},expression:"form.modify_date"}})],1)],1),s("el-col",{attrs:{span:4}},[s("el-form-item",{attrs:{label:"审核人："}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.check_name,callback:function(e){t.$set(t.form,"check_name",e)},expression:"form.check_name"}})],1)],1)],1),s("el-container",{staticClass:"boxA",staticStyle:{background:"#fff","border-radius":"15px","padding-top":"20px","padding-right":"20px","margin-bottom":"10px"}},[s("el-main",{staticStyle:{padding:"0 10px 0 0"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"出库单号"}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.salesj_no,callback:function(e){t.$set(t.form,"salesj_no",e)},expression:"form.salesj_no"}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"出库日期"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:t.isedit,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.form.salesj_date,callback:function(e){t.$set(t.form,"salesj_date",e)},expression:"form.salesj_date"}})],1)],1),s("el-col",{attrs:{span:8}},[t.pull_cust?s("el-form-item",{attrs:{label:"客户",prop:"cust_no"}},[s("label",{attrs:{slot:"label"},slot:"label"},[t._v("客       户")]),s("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:t.selectCust},model:{value:t.form.cust_no,callback:function(e){t.$set(t.form,"cust_no",e)},expression:"form.cust_no"}},t._l(t.pull_cust,(function(t,e){return s("el-option",{key:e,attrs:{label:t.cust_no+" - "+t.cust_name,value:t.cust_no.toString()}})})),1)],1):t._e()],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[t.pull_sale?s("el-form-item",{attrs:{label:"业务员"}},[s("label",{attrs:{slot:"label"},slot:"label"},[t._v("业  务  员")]),s("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.salesman_no,callback:function(e){t.$set(t.form,"salesman_no",e)},expression:"form.salesman_no"}},t._l(t.pull_sale,(function(t,e){return s("el-option",{key:e,attrs:{label:t.login_staff+" - "+t.staffr_name,value:t.login_staff.toString()}})})),1)],1):t._e()],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"柜台",prop:"counter_no"}},[s("label",{attrs:{slot:"label"},slot:"label"},[t._v("柜       台")]),s("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.counter_no,callback:function(e){t.$set(t.form,"counter_no",e)},expression:"form.counter_no"}},t._l(t.pull_counter,(function(t,e){return s("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no.toString()}})})),1)],1)],1),s("el-col",{attrs:{span:8}},[t.pull_curry?s("el-form-item",{attrs:{label:"币别"}},[s("label",{attrs:{slot:"label"},slot:"label"},[t._v("币       别")]),s("el-select",{attrs:{clearable:"","default-first-option":"",filterable:"",placeholder:"请选择",disabled:t.isedit},on:{"visible-change":function(e){return t.getRefreshPull()},change:function(e){return t.refreshs()}},model:{value:t.form.currency_no,callback:function(e){t.$set(t.form,"currency_no",e)},expression:"form.currency_no"}},t._l(t.pull_curry,(function(t,e){return s("el-option",{key:e,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no.toString()}})})),1)],1):t._e()],1)],1),s("el-row",{staticClass:"caucal"},[s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"备注"}},[s("label",{attrs:{slot:"label"},slot:"label"},[t._v("备       注")]),s("el-input",{attrs:{type:"textarea",rows:2,disabled:t.isedit},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),s("el-col",{staticClass:"returnA",staticStyle:{display:"flex","align-items":"center"},attrs:{span:8}},[s("el-radio-group",{staticStyle:{width:"200px",margin:"0 0 0 20px"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[s("el-radio",{attrs:{label:"全部结价",disabled:t.isedit}},[t._v("全部结价")]),s("el-radio",{attrs:{label:"全部转欠",disabled:t.isedit}},[t._v("全部转欠")]),s("el-radio",{staticStyle:{"margin-top":"5px"},attrs:{label:"依次结价",disabled:t.isedit}},[t._v("依次结价")]),s("el-radio",{attrs:{label:"依次转欠",disabled:t.isedit}},[t._v("依次转欠")])],1),s("div",[s("el-button",{staticStyle:{"margin-left":"0","margin-bottom":"5px"},attrs:{type:"warning",size:"mini",disabled:t.isedit,plain:""},on:{click:t.caculate}},[t._v("整计")]),s("div",{staticClass:"checkboxPro1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.return,expression:"form.return"}],attrs:{type:"checkbox",disabled:t.isedit,name:""},domProps:{checked:1==t.form.return,checked:Array.isArray(t.form.return)?t._i(t.form.return,null)>-1:t.form.return},on:{change:[function(e){var a=t.form.return,s=e.target,n=!!s.checked;if(Array.isArray(a)){var l=null,i=t._i(a,l);s.checked?i<0&&t.$set(t.form,"return",a.concat([l])):i>-1&&t.$set(t.form,"return",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.form,"return",n)},function(e){return t.isReturn(t.form.return)}]}}),s("span",{staticStyle:{"margin-left":"10px","margin-top":"10px","font-weight":"bold",color:"red"}},[t._v("退货")])])],1)],1)],1)],1),s("el-aside",{staticStyle:{"margin-left":"20px"},attrs:{width:"390px"}},[s("div",{staticClass:"orderprice",staticStyle:{display:"flex","align-items":"center"}},[s("div",{staticStyle:{width:"350px","margin-right":"10px"}})])])],1)],1),s("div",{staticClass:"vxetables1"},[s("div",{staticStyle:{width:"60%",position:"relative"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isedit,expression:"!isedit"}],staticStyle:{position:"absolute",top:"1px",right:"5px"}},[s("el-button",{attrs:{type:"primary",circle:"",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.insertEvent(-1)}}}),s("el-button",{attrs:{type:"danger",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeEvent()}}})],1),s("div",{staticStyle:{"text-align":"center",background:"rgb(128, 0, 0)",color:"#fff","font-size":"12px",padding:"6px 0"}},[t._v("出库明细")]),s("vxe-table",{ref:"xTable1",attrs:{border:"",stripe:"",resizable:"","keep-source":"",size:"mini",align:"center",height:"350","show-overflow":"","highlight-hover-row":"",loading:t.loading,"show-footer-overflow":"","footer-method":t.footerMethod,"show-footer":"","mouse-config":{selected:!0,area:!0},"keyboard-config":{isArrow:!0,isDel:!0,isEnter:!0,isTab:!0,isEdit:!0},"row-class-name":t.rowChange,"tab-config":{keyEnterToTab:!0},data:t.form.dtl,"edit-config":{trigger:"click",mode:"cell",icon:"fa fa",activeMethod:t.activeRowMethod}},on:{"edit-closed":t.editClosedEvent,"edit-actived":t.editActivedSelected,keydown:t.myKeydown,"cell-click":t.myCellClick}},[s("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),s("vxe-table-column",{attrs:{type:"seq",field:"seq",width:"60",title:"序号"}}),1==t.is_onlyone?s("vxe-table-column",{attrs:{disabled:t.counter_noFlag,field:"barcode_no",width:"150",title:"条码号","edit-render":{name:"$input",events:{keydown:t.enterFilterEvents}}}}):t._e(),s("vxe-table-column",{attrs:{title:"产品",width:"150",field:"style_no","edit-render":{autofocus:".vxe-input--inner"}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.$selectLable.selectLable(a.style_no,t.allArr.style,"style_no","style_name")))])]}},{key:"edit",fn:function(e){var a=e.row;return[s("el-select",{ref:"stylefocus",attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.changeData(a)}},model:{value:a.style_no,callback:function(e){t.$set(a,"style_no",e)},expression:"row.style_no"}},t._l(t.allArr.style,(function(t){return s("el-option",{key:t.style_no,attrs:{label:t.style_no+" - "+t.style_name,value:t.style_no}})})),1)]}}])}),s("vxe-table-column",{attrs:{field:"specs",width:"150",title:"规格","edit-render":{name:"input",attrs:{disabled:t.isedit}}}}),t._e(),t._e(),s("vxe-table-column",{attrs:{field:"wgt",title:"重量",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.wgt(a)}},model:{value:a.wgt,callback:function(e){t.$set(a,"wgt",e)},expression:"row.wgt"}})]}}])}),s("vxe-table-column",{attrs:{field:"wgt_prc",title:"工费",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.wgt_prc(a)}},model:{value:a.wgt_prc,callback:function(e){t.$set(a,"wgt_prc",e)},expression:"row.wgt_prc"}})]}}])}),s("vxe-table-column",{attrs:{field:"qty",title:"数量",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number",disabled:null!=a.barcode_no&&""!=a.barcode_no},on:{blur:function(e){return t.$vaildator.qty(a)}},model:{value:a.qty,callback:function(e){t.$set(a,"qty",e)},expression:"row.qty"}})]}}])}),s("vxe-table-column",{attrs:{field:"qty_prc",title:"数单价",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.qty_prc(a)}},model:{value:a.qty_prc,callback:function(e){t.$set(a,"qty_prc",e)},expression:"row.qty_prc"}})]}}])}),s("vxe-table-column",{attrs:{field:"add_wage",title:"附加工费",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.add_wage(a)}},model:{value:a.add_wage,callback:function(e){t.$set(a,"add_wage",e)},expression:"row.add_wage"}})]}}])}),s("vxe-table-column",{attrs:{field:"gross_wgt",title:"毛重",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.gross_wgt(a)}},model:{value:a.gross_wgt,callback:function(e){t.$set(a,"gross_wgt",e)},expression:"row.gross_wgt"}})]}}])}),s("vxe-table-column",{attrs:{field:"alloy",title:"来料成色",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.alloy(a)}},model:{value:a.alloy,callback:function(e){t.$set(a,"alloy",e)},expression:"row.alloy"}})]}}])}),s("vxe-table-column",{attrs:{title:"折转重量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.countAmount(a).toFixed(t.systemSet.wgt)))])]}}])}),s("vxe-table-column",{attrs:{field:"discount",title:"折扣",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.discount(a)}},model:{value:a.discount,callback:function(e){t.$set(a,"discount",e)},expression:"row.discount"}})]}}])}),s("vxe-table-column",{attrs:{field:"amt",title:"金额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[isNaN(t.systemSet.amt)?s("span",[t._v("0")]):s("span",[t._v(t._s(t.countMoney(a).toFixed(t.systemSet.amt)))])]}}])}),s("vxe-table-column",{attrs:{field:"remark",width:"150",align:"left",title:"备注","edit-render":{name:"input",attrs:{disabled:t.isedit}}}})],1)],1),s("div",{staticStyle:{width:"40%","margin-left":"10px",position:"relative"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isedit,expression:"!isedit"}],staticStyle:{position:"absolute",top:"1px",right:"5px"}},[s("el-button",{attrs:{type:"primary",circle:"",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.insertEvent2(-1)}}}),s("el-button",{attrs:{type:"danger",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeEvent2()}}})],1),s("div",{staticStyle:{"text-align":"center",background:"rgb(0, 64, 128)",color:"#fff","font-size":"12px",padding:"6px 0"}},[t._v("\n                    账款明细\n                ")]),s("vxe-table",{ref:"xTable2",attrs:{border:"",stripe:"",resizable:"","keep-source":"",size:"mini",align:"center",height:"350","show-overflow":"","highlight-hover-row":"",loading:t.loading,"show-footer-overflow":"","footer-method":t.footerMethod2,"show-footer":"","keyboard-config":{isArrow:!0,isDel:!0,isEnter:!0,isTab:!0,isEdit:!0,enterToTab:!0},"row-class-name":t.rowChange,data:t.form.bill,"mouse-config":{selected:!0},"edit-config":{trigger:"click",mode:"cell",icon:"fa fa",activeMethod:t.activeRowMethod}},on:{"edit-closed":t.editClosedEvent2}},[s("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),s("vxe-table-column",{attrs:{type:"seq",field:"seq",width:"60",title:"序号"}}),s("vxe-table-column",{attrs:{field:"bill_mode",title:"方式",width:"100","edit-render":{name:"$select",options:t.allArr.bill_mode,props:{clearable:!0,placeholder:"请输入",disabled:t.isedit},optionProps:{value:"kind_no",label:"kind_name"}}}}),s("vxe-table-column",{attrs:{title:"项目",width:"150",field:"style_no","edit-render":{}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.$selectLable.selectLable(a.style_no,"ADDKIND"==a.bill_mode?t.pull_style2:t.pull_style3,"ADDKIND"==a.bill_mode?"kind_no":"style_no","ADDKIND"==a.bill_mode?"kind_name":"style_name")))])]}},{key:"edit",fn:function(e){var a=e.row;return["ADDKIND"==a.bill_mode?s("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.changeData2(a)}},model:{value:a.style_no,callback:function(e){t.$set(a,"style_no",e)},expression:"row.style_no"}},t._l(t.pull_style2,(function(t){return s("el-option",{key:t.kind_no,attrs:{label:t.kind_no+" - "+t.kind_name,value:t.kind_no}})})),1):s("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.changeData3(a)}},model:{value:a.style_no,callback:function(e){t.$set(a,"style_no",e)},expression:"row.style_no"}},t._l(t.pull_style3,(function(t){return s("el-option",{key:t.style_no,attrs:{label:t.style_no+" - "+t.style_name,value:t.style_no}})})),1)]}}])}),s("vxe-table-column",{attrs:{field:"qty",title:"数量",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.qty(a)}},model:{value:a.qty,callback:function(e){t.$set(a,"qty",e)},expression:"row.qty"}})]}}])}),s("vxe-table-column",{attrs:{field:"wgt",title:"重量",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.wgt(a)}},model:{value:a.wgt,callback:function(e){t.$set(a,"wgt",e)},expression:"row.wgt"}})]}}])}),s("vxe-table-column",{attrs:{field:"alloy",title:"转存成色",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.alloy(a)}},model:{value:a.alloy,callback:function(e){t.$set(a,"alloy",e)},expression:"row.alloy"}})]}}])}),s("vxe-table-column",{attrs:{title:"折后重量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.countAmountR(a)?t.countAmountR(a).toFixed(t.systemSet.wgt):0))])]}}])}),s("vxe-table-column",{attrs:{field:"qty_prc",title:"数单价",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.qty_prc(a)}},model:{value:a.qty_prc,callback:function(e){t.$set(a,"qty_prc",e)},expression:"row.qty_prc"}})]}}])}),s("vxe-table-column",{attrs:{field:"wgt_prc",title:"金价",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.wgt_prc(a)}},model:{value:a.wgt_prc,callback:function(e){t.$set(a,"wgt_prc",e)},expression:"row.wgt_prc"}})]}}])}),s("vxe-table-column",{attrs:{field:"discount",title:"折扣",width:"100","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},autoselect:!0,events:{focus:t.myfocus}}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("vxe-input",{attrs:{type:"number"},on:{blur:function(e){return t.$vaildator.discount(a)}},model:{value:a.discount,callback:function(e){t.$set(a,"discount",e)},expression:"row.discount"}})]}}])}),s("vxe-table-column",{attrs:{title:"金额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.countMoneyR(a)?t.countMoneyR(a).toFixed(t.systemSet.amt):0))])]}}])}),s("vxe-table-column",{attrs:{field:"remark",width:"150",align:"left",title:"备注","edit-render":{name:"input",attrs:{disabled:t.isedit},events:{keyup:t.del}}}})],1)],1)]),s("div",{staticClass:"vxetables1",staticStyle:{"margin-top":"10px"}},[s("div",{staticClass:"aaa2",staticStyle:{width:"33%"}},[s("vxe-table",{ref:"xTable3",attrs:{border:"",stripe:"",resizable:"","keep-source":"",size:"mini",align:"center",height:"150","show-overflow":"","highlight-hover-row":"",loading:t.loading,"keyboard-config":{isArrow:!0,isDel:!0,isEnter:!0,isTab:!0,isEdit:!0,enterToTab:!0},"row-class-name":t.rowChange,data:t.form.metal,"mouse-config":{selected:!0},"edit-config":{trigger:"click",mode:"cell",icon:"fa fa",activeMethod:t.activeRowMethod}}},[s("vxe-table-column",{attrs:{title:"出货汇总"}},[s("vxe-table-column",{attrs:{type:"seq",field:"seq",width:"50",title:"序号"}}),s("vxe-table-column",{attrs:{field:"style_no",title:"项目代号",width:"100"}}),s("vxe-table-column",{attrs:{field:"style_name",title:"项目名称",width:"100"}}),s("vxe-table-column",{attrs:{field:"qty",title:"数量","edit-render":{name:"$input",props:{type:"number",disabled:!0}}}}),s("vxe-table-column",{attrs:{field:"wgt",title:"重量","edit-render":{name:"$input",props:{type:"number",disabled:!0}}}})],1)],1)],1),s("div",{staticClass:"aaa2",staticStyle:{width:"33%","margin-left":"5px"}},[s("vxe-table",{ref:"xTable4",attrs:{border:"",stripe:"",resizable:"","keep-source":"",size:"mini",align:"center",height:"150","show-overflow":"","highlight-hover-row":"",loading:t.loading,"keyboard-config":{isArrow:!0,isDel:!0,isEnter:!0,isTab:!0,isEdit:!0,enterToTab:!0},"row-class-name":t.rowChange,data:t.form.custmtrstock,"mouse-config":{selected:!0},"edit-config":{trigger:"click",mode:"cell",icon:"fa fa",activeMethod:t.activeRowMethod}}},[s("vxe-table-column",{attrs:{title:"账款信息（正表示欠，负表示存）"}},[s("vxe-table-column",{attrs:{type:"seq",field:"seq",width:"50",title:"序号"}}),s("vxe-table-column",{attrs:{field:"style_no",title:"产品编号",width:"100"}}),s("vxe-table-column",{attrs:{field:"style_name",title:"产品名称",width:"100"}}),s("vxe-table-column",{attrs:{field:"qty",title:"数量","edit-render":{name:"$input",props:{type:"number",disabled:!0}}}}),s("vxe-table-column",{attrs:{field:"wgt",title:"重量","edit-render":{name:"$input",props:{type:"number",disabled:!0}}}})],1)],1)],1),s("div",{staticClass:"aaa3",staticStyle:{width:"33%","margin-left":"5px",position:"relative"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isedit,expression:"!isedit"}],staticStyle:{position:"absolute",top:"3px",right:"5px","z-index":"2"}},[s("el-button",{attrs:{type:"primary",circle:"",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.insertEvent3(-1)}}}),s("el-button",{attrs:{type:"danger",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeEvent3()}}})],1),s("vxe-table",{ref:"xTable5",attrs:{border:"",stripe:"",resizable:"","keep-source":"",size:"mini",align:"center",height:"150","show-overflow":"","highlight-hover-row":"",loading:t.loading,"keyboard-config":{isArrow:!0,isDel:!0,isEnter:!0,isTab:!0,isEdit:!0,enterToTab:!0},data:t.form.amt,"row-class-name":t.rowChange,"mouse-config":{selected:!0},"edit-config":{trigger:"click",mode:"cell",icon:"fa fa"}}},[s("vxe-table-column",{attrs:{title:"收款明细"}},[s("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),s("vxe-table-column",{attrs:{type:"seq",field:"seq",width:"50",title:"序号"}}),s("vxe-table-column",{attrs:{title:"银行",field:"bank_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("el-select",{ref:"bankfocus",attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:a.bank_no,callback:function(e){t.$set(a,"bank_no",e)},expression:"row.bank_no"}},t._l(t.allArr.bank,(function(t){return s("el-option",{key:t.kind_no,attrs:{label:t.kind_name,value:t.kind_no}})})),1)]}},{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.getSelectLabel(a.bank_no,t.allArr.bank)))]}}])}),s("vxe-table-column",{attrs:{title:"币别",field:"currency_no","edit-render":{}},scopedSlots:t._u([{key:"edit",fn:function(e){var a=e.row;return[s("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:a.currency_no,callback:function(e){t.$set(a,"currency_no",e)},expression:"row.currency_no"}},t._l(t.allArr.currency,(function(t){return s("el-option",{key:t.kind_no,attrs:{label:t.kind_name,value:t.kind_no}})})),1)]}},{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.getSelectLabel(a.currency_no,t.allArr.currency)))]}}])}),s("vxe-table-column",{attrs:{field:"amt",title:"金额小计","edit-render":{name:"input",attrs:{disabled:t.isedit,type:"number"},events:{keyup:t.addBank}}}})],1)],1)],1)]),s("div",{staticClass:"totalPrice"},[s("el-form",{staticClass:"totalSum",attrs:{model:t.form,"label-width":"90px"}},[s("div",[s("div",{staticStyle:{display:"flex"}},[s("el-form-item",{attrs:{label:"出库数量"}},[s("el-input",{attrs:{type:"number",min:"0",step:"0.0001",disabled:""},model:{value:t.form.sumqty,callback:function(e){t.$set(t.form,"sumqty",e)},expression:"form.sumqty"}})],1),s("el-form-item",{attrs:{label:"结价数量"}},[s("el-input",{attrs:{type:"number",min:"0",step:"0.0001",disabled:""},model:{value:t.form.balprc_qty,callback:function(e){t.$set(t.form,"balprc_qty",e)},expression:"form.balprc_qty"}})],1),s("el-form-item",{attrs:{label:"应收金额"}},[s("el-input",{attrs:{type:"number",min:"0",step:"0.0001",disabled:""},model:{value:t.form.pay_amt,callback:function(e){t.$set(t.form,"pay_amt",e)},expression:"form.pay_amt"}})],1)],1),s("div",{staticStyle:{display:"flex"}},[s("el-form-item",{attrs:{label:"出库重量"}},[s("el-input",{attrs:{type:"number",min:"0",step:"0.0001",disabled:""},model:{value:t.form.sumwgt,callback:function(e){t.$set(t.form,"sumwgt",e)},expression:"form.sumwgt"}})],1),s("el-form-item",{attrs:{label:"结价重量"}},[s("el-input",{attrs:{type:"number",min:"0",step:"0.0001",disabled:""},model:{value:t.form.balqty_wgt,callback:function(e){t.$set(t.form,"balqty_wgt",e)},expression:"form.balqty_wgt"}})],1),s("el-form-item",{attrs:{label:"应付金额"}},[s("el-input",{attrs:{type:"number",min:"0",step:"0.0001",disabled:""},model:{value:t.form.collect_amt,callback:function(e){t.$set(t.form,"collect_amt",e)},expression:"form.collect_amt"}})],1)],1)]),s("div",{staticStyle:{display:"flex","align-items":"center","margin-left":"20px"}},[s("div",{staticClass:"checkboxPro1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isInt,expression:"isInt"}],attrs:{type:"checkbox",disabled:t.isedit,name:""},domProps:{checked:1==t.isInt,checked:Array.isArray(t.isInt)?t._i(t.isInt,null)>-1:t.isInt},on:{change:[function(e){var a=t.isInt,s=e.target,n=!!s.checked;if(Array.isArray(a)){var l=null,i=t._i(a,l);s.checked?i<0&&(t.isInt=a.concat([l])):i>-1&&(t.isInt=a.slice(0,i).concat(a.slice(i+1)))}else t.isInt=n},function(e){return t.isInts(t.isInt)}]}}),s("span",{staticStyle:{"margin-left":"10px","margin-top":"10px","font-weight":"bold",color:"red","font-size":"14px"}},[t._v("四舍五入")])]),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:t.isedit,type:"danger"},on:{click:function(e){return t.totalSum(null)}}},[t._v("合计")])],1)])],1),s("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"筛选",visible:t.outData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.outData,"isshow",e)}}},[s("div",{staticClass:"box1"},[s("el-button",{attrs:{type:"success",icon:"el-icon-plus",plain:"",circle:""},on:{click:t.showInput}}),t._l(t.bonusData.field,(function(e,a){return s("div",{key:a,staticStyle:{"margin-top":"20px",display:"flex","flex-wrap":"wrap","align-items":"center"}},[s("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.selectOne(a)}},model:{value:t.bonusData.field[a],callback:function(e){t.$set(t.bonusData.field,a,e)},expression:"bonusData.field[index]"}},t._l(t.allArr.screen_pull,(function(t){return s("el-option",{key:t.style_no,attrs:{label:t.table_name,value:t.table}})})),1),s("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),s("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.selectOne1(a)}},model:{value:t.bonusData.table[a],callback:function(e){t.$set(t.bonusData.table,a,e)},expression:"bonusData.table[index]"}},t._l(t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field,(function(t){return s("el-option",{key:t.name_no,attrs:{label:t.name,value:t.name_no}})})),1),s("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),s("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.bonusData.condition[a],callback:function(e){t.$set(t.bonusData.condition,a,e)},expression:"bonusData.condition[index]"}},t._l(t.allArr.screen_condition,(function(t){return s("el-option",{key:t.name_no,attrs:{label:t.name,value:t.name_no}})})),1),s("span",{staticStyle:{display:"inline-block",margin:"0 10px"}},[t._v("-")]),t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field[t.arrs[a]?t.arrs[a]:0].select?s("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.bonusData.parameter[a],callback:function(e){t.$set(t.bonusData.parameter,a,e)},expression:"bonusData.parameter[index]"}},t._l(t.allArr.screen_pull[t.arr[a]?t.arr[a]:0].field[t.arrs[a]?t.arrs[a]:0].select,(function(t){return s("el-option",{key:t.kind_no,attrs:{label:t.kind_name,value:t.kind_no}})})),1):s("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"请输入"},model:{value:t.bonusData.parameter[a],callback:function(e){t.$set(t.bonusData.parameter,a,e)},expression:"bonusData.parameter[index]"}}),s("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"danger",icon:"el-icon-minus",plain:"",circle:"",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRow(a,t.bonusData.field)}}})],1)}))],2),t.searchData.length?s("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.searchData}},[s("el-table-column",{attrs:{prop:"salesj_no",label:"出库单号"}}),s("el-table-column",{attrs:{prop:"cust.cust_name",label:"客户"}}),s("el-table-column",{attrs:{prop:"salesj_date",label:"时间"}}),s("el-table-column",{attrs:{prop:"balprc_qty",label:"结价数量"}}),s("el-table-column",{attrs:{prop:"balqty_wgt",label:"结价重量"}}),s("el-table-column",{attrs:{prop:"sumqty",label:"出库数量"}}),s("el-table-column",{attrs:{prop:"sumwgt",label:"出库重量"}}),s("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(a){return t.searchIt(e.row.salesj_no)}}},[t._v("查看详情 ")])]}}],null,!1,3714078723)})],1):t._e(),s("div",{staticClass:"pagination",staticStyle:{"text-align":"center"}},[s("el-pagination",{attrs:{background:"",layout:"total,sizes, prev, pager, next","current-page":t.pageIndex,"page-size":t.pageSize,"page-sizes":[40,60,80,100],total:t.pageTotal},on:{"current-change":t.handlePageChange,"size-change":t.pageSizeChange}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveOk}},[t._v("确 定")]),s("el-button",{on:{click:function(e){t.outData.isshow=!1}}},[t._v("取 消")])],1)],1),s("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"导出",visible:t.excelData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.excelData,"isshow",e)}}},[s("div",{staticClass:"pro",staticStyle:{"text-align":"center"}},[s("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto"},attrs:{clearable:"","default-first-option":"",placeholder:"请选择"},model:{value:t.excelValue,callback:function(e){t.excelValue=e},expression:"excelValue"}},[s("el-option",{attrs:{label:"新出库管理",value:"新出库管理"}},[t._v("新出库管理")]),s("el-option",{attrs:{label:"出库管理",value:"出库管理"}},[t._v("出库管理")]),s("el-option",{attrs:{label:"出货明细",value:"出货明细"}},[t._v("出货明细")]),s("el-option",{attrs:{label:"账款明细",value:"账款明细"}},[t._v("账款明细")]),s("el-option",{attrs:{label:"出货汇总",value:"出货汇总"}},[t._v("出货汇总")])],1),s("el-input",{staticStyle:{display:"block",width:"50%",margin:"10px auto"},attrs:{placeholder:"请输入出库单号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),"出库管理"==t.excelValue?s("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择客户"},model:{value:t.cust_no,callback:function(e){t.cust_no=e},expression:"cust_no"}},t._l(t.allArr.cust,(function(t,e){return s("el-option",{key:e,attrs:{label:t.cust_name,value:t.cust_no}})})),1):t._e(),"出库管理"==t.excelValue?s("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择业务员"},model:{value:t.salesman_no,callback:function(e){t.salesman_no=e},expression:"salesman_no"}},t._l(t.allArr.salesman_no,(function(t,e){return s("el-option",{key:e,attrs:{label:t.staffr_name,value:t.login_staff}})})),1):t._e(),"出库管理"!=t.excelValue&&""!=t.excelValue?s("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择产品"},model:{value:t.style_no,callback:function(e){t.style_no=e},expression:"style_no"}},t._l(t.allArr.style,(function(t,e){return s("el-option",{key:e,attrs:{label:t.style_name,value:t.style_no}})})),1):t._e(),"出货明细"==t.excelValue?s("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择柜台"},model:{value:t.counter_no,callback:function(e){t.counter_no=e},expression:"counter_no"}},t._l(t.allArr.counter,(function(t,e){return s("el-option",{key:e,attrs:{label:t.kind_name,value:t.kind_no}})})),1):t._e(),"账款明细"==t.excelValue?s("el-select",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"},attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"请选择方式"},model:{value:t.bill_mode,callback:function(e){t.bill_mode=e},expression:"bill_mode"}},t._l(t.allArr.bill_mode,(function(t,e){return s("el-option",{key:e,attrs:{label:t.kind_name,value:t.kind_no}})})),1):t._e(),"出库管理"==t.excelValue?s("div",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.salesj_date_x,callback:function(e){t.salesj_date_x=e},expression:"salesj_date_x"}})],1):t._e(),"新出库管理"==t.excelValue?s("div",{staticStyle:{display:"block",width:"50%",margin:"0 auto 10px"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"开始日期"},model:{value:t.salesj_date_x,callback:function(e){t.salesj_date_x=e},expression:"salesj_date_x"}}),s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"结束日期"},model:{value:t.datetime_x,callback:function(e){t.datetime_x=e},expression:"datetime_x"}})],1):t._e(),s("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"30px","justify-content":"center"}},[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:t.outExcel}},[t._v("导出")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.outTem}},[t._v("模板导出")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.excelData.isshow=!1}}},[t._v("取 消")])],1)])],1),s("el-dialog",{staticStyle:{padding:"0 0 20px"},attrs:{title:"打印",visible:t.printData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.printData,"isshow",e)}}},[s("el-radio-group",{attrs:{size:"mini"},on:{change:t.selectPrint},model:{value:t.printType,callback:function(e){t.printType=e},expression:"printType"}},[s("el-radio-button",{attrs:{label:"出库单"}},[t._v("出库单")]),s("el-radio-button",{attrs:{label:"出料单"}},[t._v("出料单")]),s("el-radio-button",{attrs:{label:"出库单2"}},[t._v("样式二")]),s("el-radio-button",{attrs:{label:"出料单2"}},[t._v("旧料单")]),s("el-radio-button",{attrs:{label:"出库单3"}},[t._v("出库单2")])],1),"出库单"==t.printType||"出库单2"==t.printType||"出库单3"==t.printType?s("div",{ref:"print",staticClass:"printBox",staticStyle:{"page-break-after":"always",padding:"10px"},attrs:{id:"print"}},[s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","margin-bottom":"5px"}},[1==t.form.return?s("p",{staticClass:"printTitle",staticStyle:{"font-size":"30px"}},[t._v("\n                    "+t._s(1==t.form.return?"退厂出库单":"出库单")+"\n                ")]):s("p",{staticClass:"printTitle",staticStyle:{"font-size":"30px"}},[t._v(t._s("出库单3"==t.printType?"出库单":"销售结算单"))])]),s("div",{staticClass:"printTop",staticStyle:{margin:"-5px 0 2px"}},[s("div",[s("div",{staticStyle:{"font-size":"14px","margin-bottom":"5px"}},[s("label",{staticStyle:{"font-size":"14px"}},[t._v("客户名称：")]),t._v(t._s(t.printCust.cust_name)+"\n                    ")])]),s("div",[s("div",{staticStyle:{"font-size":"12px"}},[s("label",[t._v("备注：")]),t._v(t._s(t.printList.remark))])]),s("div",{staticStyle:{"text-align":"left"}},[t.systemSet.company?s("p",{staticClass:"company",staticStyle:{"font-size":"12px"}},[t._v(t._s(t.systemSet.company))]):t._e(),s("p",{staticStyle:{"font-weight":"bold","font-size":"12px"}},[s("label",[t._v("单号：")]),t._v(t._s(t.printList.salesj_no))]),s("p",{staticStyle:{"font-size":"12px"}},[s("label",[t._v("日期：")]),t._v(t._s(t.printList.salesj_date))])])]),s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[s("p",{staticClass:"tableName"},[t._v("出库明细")]),s("p",{staticStyle:{"font-size":"12px"}},[s("label",[t._v("打印时间：")]),t._v(t._s(t.printList.datetime))])]),s("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[s("tr",{attrs:{align:"center"}},[s("th",[t._v("序号")]),s("th",{staticStyle:{width:"75px"}},[t._v("产品名称")]),s("th",[t._v("数量")]),s("th",[t._v("重量")]),s("th",{staticStyle:{width:"75px"}},[t._v("毛重")]),s("th",[t._v("折足重")]),s("th",[t._v("重单价")]),s("th",[t._v("附加工费")]),s("th",[t._v("数单价")]),s("th",[t._v("金额")]),s("th",[t._v("备注")])]),t._l(t.printDtl,(function(e,a){return s("tr",{key:a,attrs:{align:"center"}},[s("td",[t._v(t._s(e.seq))]),e.style_report?s("td",[t._v(t._s(e.style_report.style_name))]):s("td",[t._v("-")]),e.qty?s("td",[t._v(t._s(e.qty))]):s("td",[t._v("-")]),e.wgt?s("td",[t._v(t._s(e.wgt))]):s("td",[t._v("-")]),e.gross_wgt?s("td",[t._v(t._s(e.gross_wgt))]):s("td",[t._v("-")]),e.trans_wgt?s("td",[t._v(t._s(e.trans_wgt))]):s("td",[t._v("-")]),e.wgt_prc?s("td",[t._v(t._s(e.wgt_prc))]):s("td",[t._v("-")]),e.add_wage?s("td",[t._v(t._s(e.add_wage))]):s("td",[t._v("-")]),e.qty_prc?s("td",[t._v(t._s(e.qty_prc))]):s("td",[t._v("-")]),e.amt?s("td",[t._v(t._s(e.amt))]):s("td",[t._v("-")]),e.remark?s("td",[t._v(t._s(e.remark))]):s("td",[t._v("-")])])})),s("tr",{attrs:{align:"center"}},[s("td",[t._v("合计")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.dtlTotal.qty))]),s("td",[t._v(t._s(t.dtlTotal.wgt))]),s("td",[t._v(t._s(t.dtlTotal.gross_wgt))]),s("td",[t._v(t._s(t.dtlTotal.trans_wgt))]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.dtlTotal.amt))]),s("td",[t._v("-")])])],2),s("p",{staticClass:"tableName"},[t._v("账款明细")]),s("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[s("tr",{attrs:{align:"center"}},[s("th",[t._v("序号")]),s("th",[t._v("方式")]),s("th",[t._v("项目名")]),s("th",[t._v("数量")]),s("th",[t._v("重量")]),s("th",[t._v("折足重")]),s("th",[t._v("金料价格")]),s("th",[t._v("件工价")]),s("th",[t._v("金额")]),s("th",[t._v("备注")])]),t._l(t.printBill,(function(e,a){return s("tr",{key:a,attrs:{align:"center"}},[s("td",[t._v(t._s(e.seq))]),e.bill_mode?s("td",[t._v(t._s(e.bill_mode))]):s("td",[t._v("-")]),e.style_report?s("td",[t._v(t._s(e.style_report.style_name))]):s("td",[t._v("-")]),e.qty?s("td",[t._v(t._s(e.qty))]):s("td",[t._v("-")]),e.wgt?s("td",[t._v(t._s(e.wgt))]):s("td",[t._v("-")]),e.trans_wgt?s("td",[t._v(t._s(e.trans_wgt))]):s("td",[t._v("-")]),e.wgt_prc?s("td",[t._v(t._s(e.wgt_prc))]):s("td",[t._v("-")]),e.qty_prc?s("td",[t._v(t._s(e.qty_prc))]):s("td",[t._v("-")]),e.amt?s("td",[t._v(t._s(e.amt))]):s("td",[t._v("-")]),e.remark?s("td",[t._v(t._s(e.remark))]):s("td",[t._v("-")])])})),s("tr",{attrs:{align:"center"}},[s("td",[t._v("合计")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.billToatal.qty))]),s("td",[t._v(t._s(t.billToatal.wgt))]),s("td",[t._v(t._s(t.billToatal.trans_wgt))]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.billToatal.amt))]),s("td",[t._v("-")])])],2),s("div",{staticStyle:{"border-bottom":"1px solid rgb(7, 16, 114)"}},[s("div",{staticClass:"summoney"},[s("div",{staticClass:"sum1"},[s("span",[t._v("总计 金额大写 "+t._s(t.printList.money_type))]),s("span",[t._v(t._s(t.printList.money_chinese))])]),s("div",{staticClass:"sum1"},[s("span",[t._v("金额合计    "+t._s(t.printList.money_type))]),s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[t._v(t._s(t.printList.money))])])])]),"出库单"==t.printType||"出库单3"==t.printType?s("div",{staticClass:"sum2"},[s("span",{staticStyle:{color:"rgb(7, 16, 114)","font-size":"12px","border-right":"0","font-weight":"bold"}},[t._v("期初存欠帐（正欠负存）:")]),s("div",{staticStyle:{display:"flex","flex-wrap":"wrap",width:"80%"}},t._l(t.printStockStart,(function(e,a){return s("p",{key:a,staticStyle:{width:"25%",display:"flex","justify-content":"space-between"}},[s("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.style_name))]),s("span",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(e.wgt))])])})),0)]):t._e(),"出库单"==t.printType||"出库单3"==t.printType?s("div",{staticClass:"sum2"},[s("span",{staticStyle:{color:"rgb(7, 16, 114)","font-size":"12px","border-right":"0","font-weight":"bold"}},[t._v("期末存欠帐（正欠负存）:")]),s("div",{staticStyle:{display:"flex","flex-wrap":"wrap",width:"80%"}},t._l(t.printStockend,(function(e,a){return s("p",{key:a,staticStyle:{width:"25%",display:"flex","justify-content":"space-between"}},[s("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.style_name))]),s("span",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(e.wgt))])])})),0)]):t._e(),"出库单"==t.printType||"出库单2"==t.printType?s("div",{staticStyle:{"font-size":"12px",color:"#000 !important","margin-top":"5px"}},[s("p",{staticStyle:{"font-size":"12px"}},[t._v("温馨提示：")]),s("div",{staticStyle:{"font-size":"12px"}},[t._v("\n                    ①以上数据请认真核对；\n                    ②本公司所有销售均通过检测，为了保障您的利益，请将以上饰品送到当地检测部门检测后再上柜销售，未经当地部门检测就上柜销售，发生经济纠纷与本公司无关。\n                    ③该物品如需邮寄，邮寄及安全自负，本公司只负责在交付物流公司之前的安全。 ④本公司现款现结谢谢合作。\n                ")])]):t._e(),s("div",{staticStyle:{"font-size":"12px",color:"#000 !important","margin-top":"5px","text-align":"right"}},[s("big-name")],1),s("div",{staticClass:"onlyBottom"},[s("div",{staticClass:"sumBotn",staticStyle:{width:"70%"}},[s("p",[s("span",[t._v("制单：")]),t.buildHas?s("span",[t._v(t._s(t.buildHas.staffr_name))]):t._e()]),s("p",[s("span",[t._v("复核：")]),s("span")]),s("p",[s("span",[t._v("负责人：")]),t.printSale?s("span",[t._v(t._s(t.printSale.staffr_name))]):t._e()]),s("p",[s("span",[t._v("客户签名：")]),s("span")])])])]):t._e(),"出料单"==t.printType||"出料单2"==t.printType?s("div",{ref:"print",staticClass:"printBox",staticStyle:{"page-break-after":"always",padding:"10px"},attrs:{id:"print"}},[s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","margin-bottom":"5px"}},[s("p",{staticClass:"printTitle",staticStyle:{"font-size":"30px"}},[t._v(t._s("出料单"==t.printType?"出料单":"付旧料单"))])]),s("div",{staticClass:"printTop",staticStyle:{margin:"-10px 0 5px"}},[s("div",[s("p",{staticStyle:{"font-size":"14px"}},[s("label",{staticStyle:{"font-size":"14px"}},[t._v("客户名称：")]),t._v(t._s(t.printCust.cust_name))])]),s("div",[s("p",{staticStyle:{"font-size":"12px"}},[s("label",{staticStyle:{"font-size":"12px"}},[t._v("负责人：")]),t._v(t._s(t.printSale?t.printSale.staffr_name:"")+"\n                    ")]),s("p",{staticStyle:{"font-size":"12px"}},[s("label",{staticStyle:{"font-size":"12px"}},[t._v("备    注：")]),t._v(t._s(t.printList.remark)+"\n                    ")])]),s("div",{staticStyle:{"text-align":"left"}},[t.systemSet.company?s("p",{staticClass:"company",staticStyle:{"font-size":"12px"}},[t._v(t._s(t.systemSet.company))]):t._e(),s("p",{staticStyle:{"font-weight":"bold","font-size":"12px"}},[s("label",[t._v("单号：")]),t._v(t._s(t.printList.salesj_no))]),s("p",{staticStyle:{"font-size":"12px"}},[s("label",[t._v("日期：")]),t._v(t._s(t.printList.salesj_date))]),s("p",{staticStyle:{"font-size":"12px"}},[s("label",[t._v("打印时间：")]),t._v(t._s(t.printList.datetime))])])]),s("p",{staticClass:"tableName"},[t._v("出库明细")]),s("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[s("tr",{attrs:{align:"center"}},[s("th",[t._v("序号")]),s("th",[t._v("产品名称")]),s("th",[t._v("数量")]),s("th",[t._v("重量")]),s("th",[t._v("成色")]),s("th",[t._v("折足重")]),s("th",[t._v("数单价")]),s("th",[t._v("附加工费")]),s("th",[t._v("工费")]),s("th",[t._v("折扣")]),s("th",[t._v("金额")]),s("th",[t._v("备注")])]),t._l(t.printDtl,(function(e,a){return s("tr",{key:a,attrs:{align:"center"}},[s("td",[t._v(t._s(e.seq))]),e.style_report?s("td",[t._v(t._s(e.style_report.style_name))]):s("td",[t._v("-")]),e.qty?s("td",[t._v(t._s(e.qty))]):s("td",[t._v("-")]),e.wgt?s("td",[t._v(t._s(e.wgt))]):s("td",[t._v("-")]),e.alloy?s("td",[t._v(t._s(e.alloy))]):s("td",[t._v("-")]),e.trans_wgt?s("td",[t._v(t._s(e.trans_wgt))]):s("td",[t._v("-")]),e.qty_prc?s("td",[t._v(t._s(e.qty_prc))]):s("td",[t._v("-")]),e.add_wage?s("td",[t._v(t._s(e.add_wage))]):s("td",[t._v("-")]),e.wgt_prc?s("td",[t._v(t._s(e.wgt_prc))]):s("td",[t._v("-")]),e.discount?s("td",[t._v(t._s(e.discount))]):s("td",[t._v("-")]),e.amt?s("td",[t._v(t._s(e.amt))]):s("td",[t._v("-")]),e.remark?s("td",[t._v(t._s(e.remark))]):s("td",[t._v("-")])])})),s("tr",{attrs:{align:"center"}},[s("td",[t._v("合计")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.dtlTotal.qty))]),s("td",[t._v(t._s(t.dtlTotal.wgt))]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.dtlTotal.trans_wgt))]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.dtlTotal.amt))]),s("td",[t._v("-")])])],2),s("p",{staticClass:"tableName"},[t._v("账款明细")]),s("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[s("tr",{attrs:{align:"center"}},[s("th",[t._v("序号")]),s("th",[t._v("方式")]),s("th",[t._v("项目名")]),s("th",[t._v("数量")]),s("th",[t._v("重量")]),s("th",[t._v("成色")]),s("th",[t._v("折足重")]),s("th",[t._v("数单价")]),s("th",[t._v("重单价")]),s("th",[t._v("折扣")]),s("th",[t._v("金额")]),s("th",[t._v("备注")])]),t._l(t.printBill,(function(e,a){return s("tr",{key:a,attrs:{align:"center"}},[s("td",[t._v(t._s(e.seq))]),e.bill_mode?s("td",[t._v(t._s(e.bill_mode))]):s("td",[t._v("-")]),e.style_report?s("td",[t._v(t._s(e.style_report.style_name))]):s("td",[t._v("-")]),e.qty?s("td",[t._v(t._s(e.qty))]):s("td",[t._v("-")]),e.wgt?s("td",[t._v(t._s(e.wgt))]):s("td",[t._v("-")]),e.alloy?s("td",[t._v(t._s(e.alloy))]):s("td",[t._v("-")]),e.trans_wgt?s("td",[t._v(t._s(e.trans_wgt))]):s("td",[t._v("-")]),e.qty_prc?s("td",[t._v(t._s(e.qty_prc))]):s("td",[t._v("-")]),e.wgt_prc?s("td",[t._v(t._s(e.wgt_prc))]):s("td",[t._v("-")]),e.discount?s("td",[t._v(t._s(e.discount))]):s("td",[t._v("-")]),e.amt?s("td",[t._v(t._s(e.amt))]):s("td",[t._v("-")]),e.remark?s("td",[t._v(t._s(e.remark))]):s("td",[t._v("-")])])})),s("tr",{attrs:{align:"center"}},[s("td",[t._v("合计")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.billToatal.qty))]),s("td",[t._v(t._s(t.billToatal.wgt))]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.billToatal.trans_wgt))]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v("-")]),s("td",[t._v(t._s(t.billToatal.amt))]),s("td",[t._v("-")])])],2),s("div",{staticClass:"outsummoney"},[s("div",{staticClass:"sum1"},[s("span"),s("span")]),s("div",{staticClass:"sum1"},[s("span",[t._v("金额合计       "+t._s(t.printList.money_type))]),s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[t._v(t._s(t.printList.money))])])]),s("div",{staticStyle:{"font-size":"12px",color:"#000 !important","margin-top":"5px","text-align":"right"}},[s("big-name")],1),s("div",{staticClass:"onlyBottom"},[s("div",{staticClass:"sumBotn"},[s("p",[s("span",[t._v("制单：")]),t.buildHas?s("span",[t._v(t._s(t.buildHas.staffr_name))]):t._e()]),s("p",[s("span",[t._v("出料人：")]),s("span")]),s("p",[s("span",[t._v("负责人：")]),t.printSale?s("span",[t._v(t._s(t.printSale.staffr_name))]):t._e()]),s("p",[s("span",[t._v("客户签名：")]),s("span")])])])]):t._e(),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.toImg}},[t._v("转图片下载")]),s("el-button",{attrs:{type:"primary"},on:{click:t.printContext}},[t._v("直接打印")]),s("el-button",{on:{click:function(e){t.printData.isshow=!1}}},[t._v("取 消")])],1)],1),s("el-dialog",{staticStyle:{padding:"0 20px"},attrs:{title:"批量审核",visible:t.checkData.isshow,width:"60%"},on:{"update:visible":function(e){return t.$set(t.checkData,"isshow",e)}}},[s("el-form",{attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"开始日期"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.checkData.data.begin_date,callback:function(e){t.$set(t.checkData.data,"begin_date",e)},expression:"checkData.data.begin_date"}})],1),s("el-form-item",{attrs:{label:"结束日期"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.checkData.data.end_date,callback:function(e){t.$set(t.checkData.data,"end_date",e)},expression:"checkData.data.end_date"}})],1),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"success"},on:{click:function(e){return t.saveCheck("1")}}},[t._v("审 核")]),s("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.saveCheck("0")}}},[t._v("反审核")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.checkData.isshow=!1}}},[t._v("取 消")])],1)],1)],1)},n=[],l=(a("7514"),a("34ef"),a("28a5"),a("3835")),i=(a("ac6a"),a("ffc1"),a("96cf"),a("1da1")),r=(a("c5f6"),a("fd03")),o=(a("add5"),a("c0e9")),c=a.n(o),d={name:"outbound",data:function(){return{counter_noFlag:!0,is_onlyone:"",rules:{cust_no:[{required:!0,message:"请选择客户",trigger:"change"}],counter_no:[{required:!0,message:"请选择柜台",trigger:"change"}]},wage_type_pull:[],bonusData:{field:[],table:[],condition:[],parameter:[]},tableIndex:0,tableNo:0,searchData:[],arr:[],arrs:[],tableData:[],allArr:"",form:{dtl:[],bill:[],metal:[],custmtrstock:[]},isedit:!0,isCheck:!1,dialogImageUrl:"",outData:{isshow:!1,scope:null,index:0,data:{}},excelData:{isshow:!1,scope:null,index:0,data:{}},printData:{isshow:!1,scope:null,index:0,data:{}},checkData:{isshow:!1,scope:null,index:0,data:{}},keyword:"",isAdd:!1,loading:!1,excelValue:"",imgArr:[],checkList:"",isInt:1,orderList:[],setprice:[],pull_cust:[],pull_sale:[],pull_counter:[],pull_curry:[],next:null,prev:null,perData:"",printType:"出库单",printList:{},printDtl:[],printBill:[],dtlTotal:"",billToatal:"",buildHas:"",printCust:"",printSale:"",printStock:[],printStockStart:[],printStockend:[],img:"",usedCounter:"",nullBtn:!1,pull_style:[],pull_style2:[],pull_style3:[],systemSet:"",wgtTotal:"",totalWgt:"",cust_no:"",salesman_no:"",username:"",style_no:"",bill_mode:"",counter_no:"",pageIndex:1,pageSize:40,pageTotal:0,tempActiveArr:"",activeRow:"",isNumber:!1,dtlarr:[{val:"wgt",name:"重量"},{val:"gross_wgt",name:"毛重"},{val:"qty",name:"数量"},{val:"qty_prc",name:"数单价"},{val:"alloy",name:"来料成色"},{val:"trans_wgt",name:"折转重量"},{val:"wgt_prc",name:"重工费"},{val:"add_wage",name:"附加工费"},{val:"discount",name:"折扣"}],billarr:[{val:"qty",name:"数量"},{val:"wgt",name:"重量"},{val:"alloy",name:"转存成色"},{val:"trans_wgt",name:"折后重量"},{val:"qty_prc",name:"数单价"},{val:"wgt_prc",name:"金价"},{val:"discount",name:"折扣"}],datetime_x:"",salesj_date_x:"",Random:""}},created:function(){this.systemSet=JSON.parse(localStorage.getItem("systemSet")),this.geData(),this.getStoneData(),this.getPermission()},watch:{},methods:{geData:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});this.isAdd=!1,Object(r["oi"])({}).then((function(a){if(2e3==a.code){e.close(),t.form=a.data.data,t.next=a.data.next,t.prev=a.data.prev,t.orderList=a.data.subscribe;for(var s=0;s<a.data.subscribe.length;s++)t.$refs.order.setCheckboxRow([t.orderList[s]],!0);t.setprice=a.data.setprice;for(s=0;s<a.data.setprice.length;s++)t.$refs.setprice.setCheckboxRow([t.setprice[s]],!0);1==t.form.check&&(t.isCheck=!0)}else e.close(),"无数据请先添加"!=a.data.info&&"没有这条数据"!=a.data.info||(t.form={dtl:[],bill:[],amt:[]},t.nullBtn=!0),t.$message.error(a.data.info)}))},getStoneData:function(){var t=this;Object(r["Ri"])({}).then((function(e){2e3==e.code?(t.allArr=e.data,t.pull_cust=e.data.cust,t.pull_sale=e.data.salesman_no,t.pull_curry=e.data.currency,t.pull_counter=e.data.counter,t.usedCounter=e.data.user_counter,t.pull_style=e.data.style,t.pull_style3=e.data.style,t.pull_style2=e.data.addkind,t.is_onlyone=e.data.params.is_onlyone):t.$message.error(e.msg)}))},searchIt:function(t){var e=this;Object(r["Vi"])({salesj_no:t}).then((function(t){2e3==t.code?(e.form=t.data.data,e.next=t.data.next,e.prev=t.data.prev,e.outData.isshow=!1,1==e.form.check?e.isCheck=!0:e.isCheck=!1):e.$message.error(t.data.info)}))},refreshData:function(t){this.isedit=!0,this.isAdd=!1,this.isInt=1,null==t?this.geData():this.searchIt(t)},handelEdit:function(){var t=this;Object(r["wj"])({salesj_no:this.form.salesj_no}).then((function(e){console.log(e),2e3==e.code?(t.isInt=1,1==t.isedit&&(0==t.form.check?t.isedit=!1:1==t.form.check&&(t.isCheck=!0))):t.$message.error(e.data.info)}))},saveIt:function(){var t=this;console.log("hhhhhhh",this.wgtTotal,this.totalWgt,Number(this.wgtTotal)!=Number(this.totalWgt)),Number(this.wgtTotal)!=Number(this.totalWgt)?this.$confirm("两边重量合计数不一致是否保存？","提示",{type:"warning"}).then((function(){t.getSave()})).catch((function(){})):this.getSave()},getSave:function(){var t=this;this.$load.show(),this.totalSum(1);var e=this.form,a=this.$refs.xTable1.getTableData().fullData,s=this.$refs.xTable2.getTableData().fullData,n=this.$refs.xTable3.getTableData().fullData,l=this.$refs.xTable4.getTableData().fullData,i=this.$refs.xTable5.getTableData().fullData;e["dtl"]=a,e["bill"]=s,e["metal"]=n,e["custmtrstock"]=l,e["amt"]=i,e["check"]=1==this.form.check?1:0,e["return"]=1==this.form.return?"1":"0",e["setprice"]=[],e["is_int"]=this.isInt,1==this.isAdd?(e.random=this.Random,Object(r["Qg"])(e).then((function(e){if(2e3==e.code){t.$message.success("添加成功"),t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,t.orderList=e.data.subscribe;for(var a=0;a<e.data.subscribe.length;a++)t.$refs.order.setCheckboxRow([t.orderList[a]],!0);t.setprice=e.data.setprice;for(a=0;a<e.data.setprice.length;a++)t.$refs.setprice.setCheckboxRow([t.setprice[a]],!0);t.isAdd=!1,t.isedit=!0}else t.$message.error(e.data.info);t.$load.close()}))):Object(r["Qg"])(e).then((function(e){if(2e3==e.code){t.$message.success("修改成功"),t.form=e.data.data,t.next=e.data.next,t.prev=e.data.prev,t.orderList=e.data.subscribe;for(var a=0;a<e.data.subscribe.length;a++)t.$refs.order.setCheckboxRow([t.orderList[a]],!0);t.setprice=e.data.setprice;for(a=0;a<e.data.setprice.length;a++)t.$refs.setprice.setCheckboxRow([t.setprice[a]],!0);t.isedit=!0}else t.$message.error(e.data.info);t.$load.close()}))},add:function(){var t=this;0==this.isAdd?(this.getRandom(),this.isedit=!1,this.orderList=[],this.checkList="",this.form={salesj_date:"",custmtrstock:[],dtl:[],bill:[],metal:[]},setTimeout((function(){for(var e=0;e<10;e++)t.insertEvent(null,null,!0);for(var a=0;a<10;a++)t.insertEvent3()}),100),this.isInt=1,this.setprice=[],this.form.check=!1,this.isAdd=!0,this.isCheck=!1,this.nullBtn=!1,this.form.salesj_date=this.$getTime(),this.form.currency_no=this.systemSet.currency_no,this.usedCounter&&(this.form.counter_no=this.usedCounter.outcounter_no)):this.$message.error("请先保存再添加下一个")},getRandom:function(){var t=this;this.Random="",Object(r["pj"])().then((function(e){console.log(e),t.Random=e.data}))},delIt:function(){var t=this;this.$confirm("确定要删除该出库单吗？","提示",{type:"warning"}).then((function(){Object(r["ci"])({salesj_no:t.form.salesj_no}).then((function(e){if(2e3==e.code){if(t.$message({message:"删除成功",type:"success"}),null==e.data.data)t.form={},t.nullBtn=!0;else{t.form=e.data.data,t.orderList=e.data.subscribe;for(var a=0;a<e.data.subscribe.length;a++)t.$refs.order.setCheckboxRow([t.orderList[a]],!0);t.setprice=e.data.setprice;for(a=0;a<e.data.setprice.length;a++)t.$refs.setprice.setCheckboxRow([t.setprice[a]],!0);1==t.form.check?t.isCheck=!0:t.isCheck=!1}t.next=e.data.next,t.prev=e.data.prev}else t.$message.error(e.data.info)}))})).catch((function(){}))},rowChange:function(t){t.row.seq=t.seq},isEdit:function(t){var e=this;Object(r["th"])({salesj_no:this.form.salesj_no,check:1==this.form.check?"1":"0"}).then((function(t){2e3==t.code?(e.$message.success(t.msg),1==e.form.check?e.isCheck=!0:(e.isedit=!0,e.isCheck=!1)):(e.$message.error(t.data.info),1==e.form.check?e.form.check=0:e.form.check=1)}))},isReturn:function(t){this.form.return=1==t?1:0},firstPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["ki"])({}).then((function(a){if(2e3==a.code){e.close(),t.form=a.data.data,t.next=a.data.next,t.prev=a.data.prev,t.orderList=a.data.subscribe;for(var s=0;s<a.data.subscribe.length;s++)t.$refs.order.setCheckboxRow([t.orderList[s]],!0);t.setprice=a.data.setprice;for(s=0;s<a.data.setprice.length;s++)t.$refs.setprice.setCheckboxRow([t.setprice[s]],!0);1==t.form.check?t.isCheck=!0:t.isCheck=!1}else e.close(),t.$message.error(a.data.info)}))},lastPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["oi"])({}).then((function(a){if(2e3==a.code){e.close(),t.form=a.data.data,t.next=a.data.next,t.prev=a.data.prev,t.orderList=a.data.subscribe;for(var s=0;s<a.data.subscribe.length;s++)t.$refs.order.setCheckboxRow([t.orderList[s]],!0);t.setprice=a.data.setprice;for(s=0;s<a.data.setprice.length;s++)t.$refs.setprice.setCheckboxRow([t.setprice[s]],!0);1==t.form.check?t.isCheck=!0:t.isCheck=!1}else e.close(),t.$message.error(a.data.info)}))},nextPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["Fi"])({salesj_no:this.form.salesj_no}).then((function(a){if(2e3==a.code){e.close(),t.form=a.data.data,t.next=a.data.next,t.prev=a.data.prev,t.orderList=a.data.subscribe;for(var s=0;s<a.data.subscribe.length;s++)t.$refs.order.setCheckboxRow([t.orderList[s]],!0);t.setprice=a.data.setprice;for(s=0;s<a.data.setprice.length;s++)t.$refs.setprice.setCheckboxRow([t.setprice[s]],!0);1==t.form.check?t.isCheck=!0:t.isCheck=!1}else e.close(),t.$message.error(a.data.info)}))},prevPage:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["Oi"])({salesj_no:this.form.salesj_no}).then((function(a){if(2e3==a.code){e.close(),t.form=a.data.data,t.next=a.data.next,t.prev=a.data.prev,t.orderList=a.data.subscribe;for(var s=0;s<a.data.subscribe.length;s++)t.$refs.order.setCheckboxRow([t.orderList[s]],!0);t.setprice=a.data.setprice;for(s=0;s<a.data.setprice.length;s++)t.$refs.setprice.setCheckboxRow([t.setprice[s]],!0);1==t.form.check?t.isCheck=!0:t.isCheck=!1}else e.close(),t.$message.error(a.data.info)}))},insertEvent:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,s){var n,i,r,o,c,d,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.tempActiveArr="",n={style_no:"",alloy:"1",discount:"1",wgt:"",gross_wgt:"",wgt_prc:"",add_wage:"",remark:"",add_qtywage:"",qty_prc:"",qty:""},a)for(i=0,r=Object.entries(a);i<r.length;i++)o=Object(l["a"])(r[i],2),c=o[0],d=o[1],n[c]=d;return t.next=5,this.$refs.xTable1.insertAt(n,e);case 5:return u=t.sent,p=u.row,t.next=9,this.$refs.xTable1.setActiveCell(p,"style_no","alloy","discount","wgt","gross_wgt","wgt_prc","add_wage","remark","add_qtywage","qty_prc","qty");case 9:s&&(this.$refs.xTable1.setSelectCell(this.$refs.xTable1.getTableData().tableData[0],"wgt"),this.$refs.xTable1.setActiveCell(this.$refs.xTable1.getTableData().tableData[0],"style_no"));case 10:case"end":return t.stop()}}),t,this)})));function e(e,a,s){return t.apply(this,arguments)}return e}(),insertEvent2:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={bill_mode:"",alloy:"1",discount:"1"},t.next=3,this.$refs.xTable2.insertAt(a,e);case 3:return s=t.sent,n=s.row,t.next=7,this.$refs.xTable2.setActiveCell(n,"bill_mode","alloy","discount");case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),insertEvent3:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={bank_no:"",currency_no:"CNY",amt:""},t.next=3,this.$refs.xTable5.insertAt(a,e);case 3:return s=t.sent,n=s.row,t.next=7,this.$refs.xTable5.setActiveCell(n,"bank_no","currency_no","amt");case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),removeEvent:function(){var t=this,e=this.$refs.xTable1.getCheckboxRecords();0==e.length?this.$message.error("请选择你要删除的"):this.$XModal.confirm("您确定要删除该数据?").then((function(e){"confirm"===e&&t.$refs.xTable1.removeCheckboxRow()}))},removeEvent2:function(){var t=this,e=this.$refs.xTable2.getCheckboxRecords();0==e.length?this.$message.error("请选择你要删除的"):this.$XModal.confirm("您确定要删除该数据?").then((function(e){"confirm"===e&&t.$refs.xTable2.removeCheckboxRow()}))},removeEvent3:function(){var t=this,e=this.$refs.xTable5.getCheckboxRecords();0==e.length?this.$message.error("请选择你要删除的"):this.$XModal.confirm("您确定要删除该数据?").then((function(e){"confirm"===e&&t.$refs.xTable5.removeCheckboxRow()}))},enterFilterEvent:function(t,e){t.$panel;var a=t.row,s=this;if(13===e.$event.keyCode){s.insertEvent(-1);var n=s.allArr.style.filter((function(t){return t.style_no==e.value}));n[0]&&(a.style_name=n[0].style_name,a.type_no=n[0].type_no,a.gold_no=n[0].gold_no),a.style_no=e.value,Object(r["Ib"])({cust_no:s.form.cust_no,style_no:a.style_no}).then((function(t){if(2e3==t.code){var e=t.data.types;"工费类型"==e?(a.qty_prc=t.data.saleqty_prc,a.wgt_prc=t.data.salewgt_prc,a.alloy=t.data.ratio,a.add_qtywage=t.data.saleaddqty_prc,a.add_wage=t.data.saleadd_prc):"产品工费"==e?(a.qty_prc=t.data.qty_wage,a.wgt_prc=t.data.wgt_wage,a.alloy=t.data.ratio,a.add_qtywage=t.data.add_qtywage,a.add_wage=t.data.add_wage):"客户工费"==e&&(a.qty_prc=t.data.saleqty_prc,a.wgt_prc=t.data.salewgt_prc,a.alloy=t.data.ratio,a.add_qtywage=t.data.saleaddqty_prc,a.add_wage=t.data.saleadd_prc)}else 4001==t.code?s.$message({message:t.data.info,type:"warning"}):s.$message.error(t.data.info)}))}},del:function(t,e){t.$panel,t.row;e.keyCode},editMethod:function(t){t.row,t.column},addBank:function(t,e){t.$panel,t.row;13===e.keyCode&&this.insertEvent3(-1)},showOut:function(){var t=this;this.excelData.isshow=!0,Object(r["wc"])({}).then((function(e){2e3==e.code?t.username=e.data.login_staff:t.$message.error(e.msg)}))},outExcel:function(){var t=this,e=this.username;this.excelData.isshow=!1,this.$axios.get(this.$baseURL+"salesj_export",{params:{login_staff:e,salesj_no:this.keyword,type:this.excelValue,cust_no:this.cust_no,style_no:this.style_no,salesman_no:this.salesman_no,counter_no:this.counter_no,bill_mode:this.bill_mode,salesj_date:this.salesj_date_x,datetime:this.datetime_x},responseType:"arraybuffer"}).then((function(e){var a=new Blob([e.data],{type:"application/x-xls"}),s=document.createElement("a");s.href=window.URL.createObjectURL(a),s.download=t.excelValue+".xlsx",s.click()}))},outTem:function(){var t=this;this.$axios.get(this.$baseURL+"salesj_template_export",{params:{token:sessionStorage.getItem("userToken"),type:this.excelValue},responseType:"arraybuffer"}).then((function(e){var a=new Blob([e.data],{type:"application/x-xls"}),s=document.createElement("a");s.href=window.URL.createObjectURL(a),s.download=t.excelValue+"模板.xlsx",s.click()}))},activeRowMethod:function(){return 0==this.isedit||(this.$message.error("该状态下不可编辑"),!1)},selectIt:function(t){var e=this.allArr.style.filter((function(e){return e.style_no==t.row.style_no}));t.row.style_no&&(t.row.style_name=e[0].style_name,t.row.type_no=e[0].type_no,t.row.gold_no=e[0].gold_no)},enterFilterEvents:function(t,e){var a=this,s=(t.$panel,t.row),n=this.$refs.xTable1.getTableData().tableData;if(13===e.$event.keyCode){for(var l=0;l<n.length;l++)for(var i=l+1;i<n.length;i++)if(n[l].barcode_no&&n[l].barcode_no===n[i].barcode_no)return s.barcode_no="",void this.$message.error("条形码不能有重复的,请重新输入");Object(r["tj"])({barcode_no:s.barcode_no,counter_no:this.form.counter_no}).then((function(t){if(2e3==t.code){if(t.data.style_no){a.changeData(t.data),s.salesj_no=t.data.bill_no,s.style_no=t.data.style_no,s.style_name=t.data.style_name,s.qty=t.data.qty,s.gold_no=t.data.gold_no,s.alloy=t.data.alloy,s.barcode_no=t.data.barcode_no,s.type_no=t.data.type_no,s.wgt=t.data.wgt,s.wgt_prc=t.data.insjdtl_info.salewgt_prc,s.add_wage=t.data.insjdtl_info.saleadd_wage,s.qty_prc=t.data.insjdtl_info.saleqty_prc,s.discount=t.data.discount,s.amt=t.data.insjdtl_info.saleamt,s.remark=t.data.remark,s.specs=t.data.specs;for(var e=0;e<n.length;e++)n[e].style_no&&(n[e].qty=1,a.$refs.xTable1.setActiveCell(a.$refs.xTable1.getTableData().tableData[e+1],"barcode_no"))}a.$forceUpdate()}else a.$message.error(t.data.info)}))}},changeData:function(t){var e=this,a=this.allArr.style.filter((function(e){return e.style_no==t.style_no}));this.tempActiveArr=a[0],t.style_no&&(t.style_name=a[0].style_name,t.type_no=a[0].type_no,t.gold_no=a[0].gold_no),this.$load.show(),Object(r["Ib"])({cust_no:this.form.cust_no,style_no:t.style_no}).then((function(a){if(e.$load.close(),2e3==a.code){var s=a.data.types;"工费类型"==s?(t.qty_prc=a.data.saleqty_prc,t.wgt_prc=a.data.salewgt_prc,t.alloy=a.data.ratio,t.add_qtywage=a.data.saleaddqty_prc,t.add_wage=a.data.saleadd_prc):"产品工费"==s?(t.qty_prc=a.data.qty_wage,t.wgt_prc=a.data.wgt_wage,t.alloy=a.data.ratio,t.add_qtywage=a.data.add_qtywage,t.add_wage=a.data.add_wage):"客户工费"==s&&(t.qty_prc=a.data.saleqty_prc,t.wgt_prc=a.data.salewgt_prc,t.alloy=a.data.ratio,t.add_qtywage=a.data.saleaddqty_prc,t.add_wage=a.data.saleadd_prc),e.$forceUpdate()}else 4001==a.code?e.$message({message:a.data.info,type:"warning"}):e.$message.error(a.data.info)})),t.wage_type="",Object(r["od"])({cust_no:this.form.cust_no,style_no:t.style_no}).then((function(t){2e3==t.code?e.wage_type_pull=t.data.wage_type:e.$message.error(t.data.info)}))},changeDatas:function(t){var e=this;Object(r["pd"])({cust_no:this.form.cust_no,style_no:t.style_no,wage_type:t.wage_type}).then((function(a){2e3==a.code?(t.add_wage=a.data.saleadd_prc,t.qty_prc=a.data.saleqty_prc,t.wgt_prc=a.data.salewgt_prc):e.$message.error(a.data.info)}))},changeData2:function(t){if(t){var e=this.allArr.addkind.filter((function(e){return e.kind_no==t.style_no}));t.style_no&&(t.style_name=e[0].kind_name)}},changeData3:function(t){if(t){var e=this.allArr.style.filter((function(e){return e.style_no==t.style_no}));t.style_no&&(t.style_name=e[0].style_name)}},footerMethod:function(t){var e=this,a=t.columns,s=t.data;return[a.map((function(t,a){return 1===a?"合计":"wgt"==t.property?(e.wgtTotal="".concat(e.$utils.sum(s,t.property).toFixed(e.systemSet.wgt)," "),"".concat(e.countAllAmount(s).toFixed(e.systemSet.wgt)," ")):"amt"==t.property?"".concat(e.countAllMoney(s).toFixed(e.systemSet.amt)," "):"qty"==t.property?"".concat(e.$utils.sum(s,t.property).toFixed(e.systemSet.qty)," "):0!==a?"-":void 0}))]},footerMethod2:function(t){var e=this,a=t.columns,s=t.data;return[a.map((function(t,a){return 1===a?"合计":7===a?"".concat(e.countAllAmountR(s).toFixed(e.systemSet.wgt)," "):11===a?"".concat(e.countAllMoneyR(s).toFixed(e.systemSet.amt)," "):0===a?void 0:2===a||3===a||8===a||6===a||9===a||10===a||12===a?"-":4===a?"".concat(e.$utils.sum(s,t.property).toFixed(e.systemSet.qty)," "):5===a?(e.totalWgt="".concat(e.$utils.sum(s,t.property).toFixed(e.systemSet.wgt)," "),"".concat(e.$utils.sum(s,t.property).toFixed(e.systemSet.wgt)," ")):"".concat(e.$utils.sum(s,t.property)," ")}))]},showInput:function(){null==this.bonusData.field&&(this.bonusData.field=[]),null==this.bonusData.table&&(this.bonusData.table=[]),null==this.bonusData.condition&&(this.bonusData.condition=[]),null==this.bonusData.parameter&&(this.bonusData.parameter=[]);var t="";this.bonusData.field.push(t),this.bonusData.table.push(t),this.bonusData.condition.push(t),this.bonusData.parameter.push(t)},selectOne:function(t){for(var e=0;e<this.allArr.screen_pull.length;e++)this.allArr.screen_pull[e].table==this.bonusData.field[t]&&(this.tableIndex=e);this.arr[t]=this.tableIndex},selectOne1:function(t){for(var e=0;e<this.allArr.screen_pull[this.arr[t]].field.length;e++)this.allArr.screen_pull[this.arr[t]].field[e].name_no==this.bonusData.table[t]&&(this.tableNo=e);this.arrs[t]=this.tableNo},deleteRow:function(t,e){e.splice(t,1)},saveOk:function(){for(var t=this,e=[],a=0;a<this.bonusData.field.length&&this.bonusData.table.length&&this.bonusData.condition.length&&this.bonusData.parameter.length;a++)e[a]={},e[a].table=this.bonusData.field[a],e[a].field=this.bonusData.table[a],e[a].condition=this.bonusData.condition[a],e[a].parameter=this.bonusData.parameter[a];Object(r["Mh"])({data:e,page:this.pageIndex,page_size:this.pageSize}).then((function(e){2e3==e.code?(t.searchData=e.data.data,t.pageTotal=e.data.count):t.$message.error(e.data.info)}))},handlePageChange:function(t){this.pageIndex=t,this.saveOk()},pageSizeChange:function(t){this.pageSize=t,this.saveOk()},seeIt:function(t){var e=this;this.outData.isshow=!1,apiSearchPro({style_no:t}).then((function(t){2e3==t.code?(e.form=t.data.data,e.imageUrl1=t.data.data.img1,e.imageUrl2=t.data.data.img2,e.imageUrl3=t.data.data.img3,e.imageUrl4=t.data.data.img4):e.$message.error(t.data.info)}))},caculate:function(){var t=this,e=this.$refs.xTable1.getTableData().fullData;""==this.checkList?this.$message.error("请选择"):Object(r["hh"])({type:this.checkList,dtl:e,is_int:this.isInt}).then((function(e){2e3==e.code?(t.$message.success(e.msg),t.form.bill=e.data.bill,t.form.metal=e.data.metal,t.form.sumqty=e.data.all.in_qty,t.form.sumwgt=e.data.all.in_wgt,t.form.balprc_qty=e.data.all.trans_qty,t.form.balqty_wgt=e.data.all.trans_wgt,t.form.pay_amt=e.data.all.payment,t.form.collect_amt=e.data.all.collection):t.$message.error(e.data.info)}))},selectCust:function(){var t=this;Object(r["zg"])({cust_no:this.form.cust_no,salesj_no:this.form.salesj_no}).then((function(e){if(2e3==e.code){t.form.custmtrstock=e.data.data,t.form.custcurrency=e.data.custcurrency,t.form.salesman_no=e.data.salesman[0]?e.data.salesman[0].salesman_no:null;var a=[];e.data.arr.map((function(e,s){a.push(Object.assign({},e,{alloy:"1.0000",discount:"1.0000"})),t.form.dtl=a}))}else t.$message.error(e.data.info)})),Object(r["Vh"])({cust_no:this.form.cust_no,salesj_no:this.form.salesj_no}).then((function(e){if(2e3==e.code){t.orderList=e.data.subscribe,t.setprice=e.data.setprice;for(var a=[],s=[],n=0;n<e.data.subscribe.length;n++)1==e.data.subscribe[n].is_use&&(a=n,t.$refs.order.setCheckboxRow([t.orderList[a]],!0));for(var l=0;l<e.data.setprice.length;l++)1==e.data.setprice[l].is_use&&(s=l,t.$refs.setprice.setCheckboxRow([t.setprice[s]],!0))}else t.$message.error(e.data.info)})),console.log("123465",this.form.dtl)},countAmount:function(t){var e=this.$utils.multiply(t.wgt,t.alloy);return t.trans_wgt=e,e},countAllAmount:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countAmount(t)})))},countMoney:function(t){var e=(t.wgt_prc*t.wgt+t.add_wage*t.wgt+t.qty*t.qty_prc)*t.discount;return t.amt=e,e},countAllMoney:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countMoney(t)})))},countAmountR:function(t){var e=this.$utils.multiply(t.wgt,t.alloy);return t.trans_wgt=e,e},countAllAmountR:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countAmountR(t)})))},countMoneyR:function(t){var e=(t.wgt_prc*t.wgt+t.qty_prc*t.qty)*t.discount;return t.amt=e,e},countAllMoneyR:function(t){var e=this;return this.$utils.sum(t.map((function(t){return e.countMoneyR(t)})))},editClosedEvent:function(t){var e=t.row;t.column;this.isNumber=!1,this.activeRow=e,e.trans_wgt=this.countAmount(e),e.amt=this.countMoney(e),this.tempActiveArr.style_no&&(this.tempActiveArr=e)},editActivedSelected:function(t){t.row,t.column},myKeydown:function(t){var e=t.$event,a=this.$refs.xTable1.getTableData().tableData,s=this.activeRow.seq;++s;var n=this.activeRow.seq;--n;var l=a[n];1!=this.isNumber&&(38==e.keyCode?this.activeRow.seq>1&&(this.activeRow=a[this.activeRow.seq-2]):40!=e.keyCode&&13!=e.keyCode||(console.log(s,"seq",a.length,"table1.length"),s>=a.length?l.style_no||l.style_name||l.alloy?this.insertEvent(-1,{style_no:l.style_no,style_name:l.style_name,alloy:l.alloy,type_no:l.type_no,gold_no:l.gold_no,wgt_prc:l.wgt_prc}):this.insertEvent(-1):(this.activeRow=a[this.activeRow.seq],this.activeRow.style_no||l.style_no&&(this.activeRow.style_name=l.style_name,this.activeRow.style_no=l.style_no,this.activeRow.alloy=l.alloy,this.activeRow.type_no=l.type_no,this.activeRow.gold_no=l.gold_no,this.activeRow.wgt_prc=l.wgt_prc))))},myfocus:function(t){t.row,t.$rowIndex,t.$columnIndex;var e=t.column,a=["wgt","gross_wgt","alloy","wgt_prc","add_wage","discount","remark"],s=e.property;a.forEach((function(t){s==t&&console.log(t)}));var n=a.some((function(t){return t==s}));n&&(this.isNumber=n)},myCellClick:function(t){var e=t.row;t.columnIndex,t.column;this.activeRow=e},editClosedEvent2:function(t){var e=t.row;t.column;e.trans_wgt=this.countAmount(e),e.amt=this.countMoney(e)},countPrice:function(t){var e=Number(t.wgt),a=Number(t.wgt)-Number(t.used_wgt);if(a>=0)return e;t.used_wgt=t.wgt},isInts:function(t){this.isInt=1==t?1:0},totalSum:function(t){var e=this,a=this.$refs.xTable1.getTableData().tableData,s=this.$refs.xTable2.getTableData().tableData;Object(r["fj"])({is_int:this.isInt,dtl:a,bill:s}).then((function(a){2e3==a.code?(null==t&&e.$message.success(a.msg),e.form.metal=a.data.metal,e.form.sumqty=a.data.all.in_qty,e.form.sumwgt=a.data.all.in_wgt,e.form.balprc_qty=a.data.all.trans_qty,e.form.balqty_wgt=a.data.all.trans_wgt,e.form.pay_amt=a.data.all.payment,e.form.collect_amt=a.data.all.collection):e.$message.error(a.data.info)}))},selectChangeEvent:function(t){t.checked,t.records;for(var e=this.$refs.setprice.getTableData().tableData,a=0;a<e.length;a++){var s=this.$refs.setprice.isCheckedByCheckboxRow(e[a]);e[a].is_use=s?1:0}},selectPrice:function(){for(var t=this,e=this.$refs.setprice.getCheckboxRecords(),a=0;a<e.length;a++)e[a].is_use=1;var s=this.$refs.setprice.getTableData().tableData,n=this.$refs.xTable2.getTableData().tableData;s.length<=0?this.$message.error("请勾选"):Object(r["Ii"])({data:s,bill:n}).then((function(e){if(2e3==e.code){t.setprice=e.data.setprice,t.form.bill=e.data.bill;for(var a=[],s=0;s<e.data.setprice.length;s++)1==e.data.setprice[s].is_use&&(a=s,t.$refs.setprice.setCheckboxRow([t.setprice[a]],!0));t.$message.success(e.msg)}else t.$message.error(e.data.info)}))},selectOreder:function(){var t=this,e=this.$refs.order.getCheckboxRecords();e.length<=0?this.$message.error("请勾选"):Object(r["Hi"])({data:e}).then((function(e){if(2e3==e.code){var a=[];e.data.map((function(t,e){a.push(Object.assign({},t,{alloy:"1.0000",discount:"1.0000"}))})),t.form.dtl=a,t.$message.success(e.msg)}else t.$message.error(e.data.info)}))},selectItem:function(t){var e=this.allArr.transgold_no.filter((function(e){return e.style_no==t.type_no}));t.style_name=e[0].style_name},selectItem2:function(t){var e=this.allArr.balgold_no.filter((function(e){return e.style_no==t.type_no}));t.style_name=e[0].style_name},getPermission:function(){var t=this;Object(r["xb"])({id:"31"}).then((function(e){2e3==e.code?t.perData=e.data:t.$message.error(e.msg)}))},searchAll:function(t){if(this.form.cust_no=t,t){for(var e=this.allArr.cust,a=[],s=0;s<e.length;s++)(e[s].cust_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[s].cust_name.indexOf(t)>=0)&&a.push(e[s]);this.pull_cust=a}else this.pull_cust=this.allArr.cust},searchSale:function(t){if(this.form.salesman_no=t,t){for(var e=this.allArr.salesman_no,a=[],s=0;s<e.length;s++)(e[s].login_staff.toLowerCase().indexOf(t.toLowerCase())>=0||e[s].staffr_name.indexOf(t)>=0)&&a.push(e[s]);this.pull_sale=a}else this.pull_sale=this.allArr.salesman_no},searchCurry:function(t){if(this.form.currency_no=t,t){for(var e=this.allArr.currency,a=[],s=0;s<e.length;s++)(e[s].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[s].kind_name.indexOf(t)>=0)&&a.push(e[s]);this.pull_curry=a}else this.pull_curry=this.allArr.currency},searchCounter:function(t){if(this.form.counter_no=t,t){for(var e=this.allArr.counter,a=[],s=0;s<e.length;s++)(e[s].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[s].kind_name.indexOf(t)>=0)&&a.push(e[s]);this.pull_counter=a}else this.pull_counter=this.allArr.counter},searchStyle:function(t){if(t){for(var e=this.allArr.style,a=[],s=0;s<e.length;s++)(e[s].style_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[s].style_name.indexOf(t)>=0)&&a.push(e[s]);this.pull_style=a}else this.pull_style=this.allArr.style},searchStyle2:function(t){if(t){for(var e=this.allArr.addkind,a=[],s=0;s<e.length;s++)(e[s].kind_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[s].kind_name.indexOf(t)>=0)&&a.push(e[s]);this.pull_style2=a}else this.pull_style2=this.allArr.addkind},searchStyle3:function(t){if(t){for(var e=this.allArr.style,a=[],s=0;s<e.length;s++)(e[s].style_no.toLowerCase().indexOf(t.toLowerCase())>=0||e[s].style_name.indexOf(t)>=0)&&a.push(e[s]);this.pull_style3=a}else this.pull_style3=this.allArr.style},refreshs:function(){var t=this;Object(r["mi"])({counter:this.form.counter_no}).then((function(e){t.allArr.style=e.data.style,t.pull_style=e.data.style})),this.$forceUpdate()},selectPrint:function(){var t=this,e=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["yf"])({salesj_no:this.form.salesj_no,type:this.printType.substring(0,3)}).then((function(a){2e3==a.code?(e.close(),t.printList=a.data,t.printDtl=a.data.dtl_report,t.printBill=a.data.bill_report,t.dtlTotal=a.data.dtl_total,t.billToatal=a.data.bill_total,t.buildHas=a.data.build_has,t.printCust=a.data.cust_report_with,t.printSale=a.data.salesman_report,t.printStock=a.data.custmtrstock,t.printStockStart=a.data.custmtrstock_start,t.printStockend=a.data.custmtrstock_end):(e.close(),t.$message.error(a.data.info))}))},toImg:function(){var t=this;c()(this.$refs.print,{backgroundColor:"white",useCORS:!0,windowHeight:document.body.scrollHeight}).then((function(e){var a=e.toDataURL();t.img=a,t.download()}))},download:function(){var t=this.img;this.downloadFile(this.printType+".png",t)},downloadFile:function(t,e){var a=document.createElement("a"),s=this.base64ToBlob(e),n=document.createEvent("HTMLEvents");n.initEvent("click",!0,!0),a.download=t,a.href=URL.createObjectURL(s),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))},base64ToBlob:function(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],s=window.atob(e[1]),n=s.length,l=new Uint8Array(n),i=0;i<n;++i)l[i]=s.charCodeAt(i);return new Blob([l],{type:a})},printContext:function(){this.$print(this.$refs.print)},printOut:function(){var t=this,e=this.$loading({lock:!0,text:"打印加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});Object(r["yf"])({salesj_no:this.form.salesj_no,type:this.printType.substring(0,3)}).then((function(a){2e3==a.code?(t.printData.isshow=!0,e.close(),t.printList=a.data,t.printDtl=a.data.dtl_report,t.printBill=a.data.bill_report,t.dtlTotal=a.data.dtl_total,t.billToatal=a.data.bill_total,t.buildHas=a.data.build_has,t.printCust=a.data.cust_report_with,t.printSale=a.data.salesman_report,t.printStock=a.data.custmtrstock,t.printStockStart=a.data.custmtrstock_start,t.printStockend=a.data.custmtrstock_end):(e.close(),t.$message.error(a.data.info))}))},getSystem:function(){var t=this;Object(r["gg"])({}).then((function(e){2e3==e.code?t.systemSet=e.data:t.$message.error(e.data.info)}))},getSelectLabel:function(t,e){if(e){var a=e.find((function(e){return e.kind_no===t}));return a?a.kind_name:null}},saveCheck:function(t){var e=this,a=this.checkData.data;Object(r["He"])({begin_date:a.begin_date,end_date:a.end_date,check:t}).then((function(t){2e3==t.code?(e.$message.success(t.msg),e.searchIt(e.form.salesj_no),e.checkData.isshow=!1):e.$message.error(t.data.info)}))},getRefreshPull:function(){this.pull_cust=this.allArr.cust,this.pull_sale=this.allArr.salesman_no,this.pull_counter=this.allArr.counter,this.pull_curry=this.allArr.currency}}},u=d,p=(a("6c15"),a("1388"),a("2877")),_=Object(p["a"])(u,s,n,!1,null,"2cfc3f61",null);e["default"]=_.exports},d625:function(t,e,a){},e484:function(t,e,a){t.exports=a.p+"img/next1.ab2ca5a8.png"}}]);
//# sourceMappingURL=chunk-5325537c.1012642f.js.map